# shipyard.toml configuration file (similar to fly.toml format)
# generated by the Shipyard CLI

app = 'deploy_example_phoenix'

# Supports multiple domains
domains = ["test1.example.com", "test2.example.com"]

# (Optional) Specify primary domain; if not set, domains[0] is used
# primary_domain = "example.com"

# Number of releases to keep
keep_releases = 3


# [env] Used to define non-sensitive application environment variables
# Booleans and numbers do not require quotes; strings do
[env]
  PHX_SERVER=true
  PHX_HOSTS = ["test1.example.com", "test2.example.com"]
  DATABASE_PATH= "/var/lib/app1/deploy_example_phoenix.db"


# [hooks] Used to define commands executed at specific stages of the deployment lifecycle
# For example, run database migrations before traffic is switched
[hooks]
  # The migrate hook runs after the new version passes health checks and before traffic switch.
  # If the migrate hook fails, the deployment is aborted.
  # type: "shell" or "eval" (eval is only for Elixir/Phoenix apps and executes code inside the app)
  # command: the command or Elixir code to execute
  [[hooks.migrate]]
    name = "Database migration"
    type = "shell"
    command = "bin/migrate"

